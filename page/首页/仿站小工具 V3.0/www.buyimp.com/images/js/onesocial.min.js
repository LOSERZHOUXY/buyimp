var jq=$=jQuery;$(document).ready(function(e){e(".single-item #buddypress").attr("style",""),$body=e("body"),$body.hasClass("single-item")&&$body.hasClass("groups")&&0==$body.scrollTop()&&200!==e("#buddypress").data("cover-size")&&!e("#buddypress").data("page-refreshed")&&e("html,body").scrollTop(260)});var BuddyBossMain=function(e,t,n){var i={$document:e(document),$window:e(t)},a={},o=(e({}),{}),s={};a.init=function(){i.$document.ready(a.domReady),s.init()},a.domReady=function(){i.body=e("body"),i.$buddypress=e("#buddypress"),o.domReady()},o.domReady=function(){function i(){var e=t,n="inner";return"innerWidth"in t||(n="client",e=document.documentElement||document.body),{width:e[n+"Width"],height:e[n+"Height"]}}function a(){return"mobile"!=e.cookie("switch_mode")&&(translation.only_mobile||(i().width<=480?e("body").removeClass("is-desktop").addClass("is-mobile"):e("body").removeClass("is-mobile").addClass("is-desktop"))),j=BuddyBoss.is_mobile=e("body").hasClass("is-mobile")}function o(){return q&&q.length&&(k=!0),k}function s(){var n=(w.height(),94*q.find("li").length);if(j&&Q.height()<w.height()&&e("#page").css("min-height",w.height()-(e("#mobile-header").height()+e("#colophon").height())),j&&e("#buddyboss-swipe-area").length&&T.state&&e("#buddyboss-swipe-area").css({left:"left"===T.state?240:"auto",right:"right"===T.state?240:"auto",width:e(t).width()-240,height:e(t).outerHeight(!0)+200}),j&&0!==e("#menu-my-profile").length){var i='<li id="wp-admin-bar-my-account-settings" class="menupop"><a class="ab-item" aria-haspopup="true" href="#">'+translation.other+'</a><div class="ab-sub-wrapper">'+e("#menu-my-profile")[0].outerHTML+"</div><li>";e(i).appendTo("#wp-admin-bar-my-account-buddypress")}var a=e("#wp-admin-bar-logout"),o=e("#wp-admin-bar-user-actions"),s=e("#wp-admin-bar-my-account-settings .ab-submenu").first();a.length&&o.length&&s.length&&(j?a.appendTo(s):a.appendTo(o)),j&&k&&!x?(x=!0,g=e('<div id="mobile-item-nav-wrap" class="mobile-item-nav-container mobile-item-nav-scroll-container">'),v=e('<div class="mobile-item-nav-wrapper">').appendTo(g),y=e('<div id="mobile-item-nav" class="mobile-item-nav">').appendTo(v),y.append(q.html()),y.css("width",94*q.find("li").length),g.insertBefore(q).show(),e("#mobile-item-nav-wrap, .mobile-item-nav-scroll-container, .mobile-item-nav-container").addClass("fixed"),q.css({display:"none"})):!j&&k&&x?(g.css({display:"none"}),q.css({display:"block"}),_.trigger("menu-close.buddyboss")):j&&k&&x&&(g.css({display:"block",width:n}),y.css({width:n}),q.css({display:"none"})),"undefined"!=typeof Selects&&e.isFunction(Selects.populate_select_label)&&Selects.populate_select_label(j)}function r(){a(),o(),s(),l()}function d(){if(j&&0!==e("#menu-my-profile").length){var t='<li id="wp-admin-bar-my-account-settings" class="menupop"><a class="ab-item" aria-haspopup="true" href="#">'+translation.other+'</a><div class="ab-sub-wrapper">'+e("#menu-my-profile")[0].outerHTML+"</div><li>";e(t).appendTo("#wp-admin-bar-my-account-buddypress"),jQuery("#wpadminbar.mobile").find("#menu-my-profile a").on("click.wp-mobile-hover",function(e){e.stopPropagation()})}}function c(e){for(var n=e.offsetTop,i=e.offsetLeft,a=e.offsetWidth,o=e.offsetHeight;e.offsetParent;)e=e.offsetParent,n+=e.offsetTop,i+=e.offsetLeft;return n<t.pageYOffset+t.innerHeight&&i<t.pageXOffset+t.innerWidth&&n+o>t.pageYOffset&&i+a>t.pageXOffset}function l(){j&&k&&(e("#mobile-item-nav #nav-bar-filter .hideshow ul").length>0&&(e("#mobile-item-nav #nav-bar-filter").append(e("#mobile-item-nav #nav-bar-filter .hideshow ul").html()),e("#mobile-item-nav #nav-bar-filter .hideshow").remove()),C||(C=e(".mobile-item-nav-scroll-container").swiper({scrollContainer:!0,slideElement:"div",slideClass:"mobile-item-nav",wrapperClass:"mobile-item-nav-wrapper"})))}function u(){if(j){var t=e("#mobile-header .searchform");t.length&&(t.focusin(function(){t.addClass("animate-form")}),t.focusout(function(){t.removeClass("animate-form")}))}}function h(){e(".generic-button:not(.pending)").on("click",function(){$link=e(this).find("a"),$link.find("i").length||$link.hasClass("pending")||$link.append('<i class="fa fa-spinner fa-spin"></i>')})}function f(){var t=0;e("#header-search").nextAll("div, a").each(function(){t+=e(this).width()}),z.width(e(".header-wrapper").width()-180-t)}function p(){e("#posts-carousel ul").carouFredSel({responsive:!0,width:"100%",items:{width:310,visible:{min:1,max:1}},swipe:{onTouch:!0,onMouse:!0},scroll:{items:1,fx:"crossfade",onBefore:X},auto:!1,prev:{button:function(){return e(this).closest("#posts-carousel").find("#prev")},key:"left"},next:{button:function(){return e(this).closest("#posts-carousel").find("#next")},key:"right"}})}function b(){e("#wp-admin-bar-my-account-buddypress").find("li").each(function(){var t,n,i=e(this),a=i.children("a").children(".count");0!=a.length&&(t=i.attr("id"),n=e(".bp-menu.bp-"+t.replace(/wp-admin-bar-my-account-/,"")+"-nav"),0==n.find(".count").length&&n.find("a").append('<span class="count">'+a.html()+"</span>"))})}function m(){B?e('input[type="checkbox"], input[type="radio"]').each(function(){var t=e(this);"gf_other_choice"==t.val()?(t.addClass("styled"),t.next().wrap('<strong class="other-option"></strong>')):t.parents("#bp-group-documents-form").length||(t.addClass("styled"),0==t.next("label").length&&0==t.next("strong").length&&t.after("<strong></strong>"))}):e(' #buddypress table.notifications input, #send_message_form input[type="checkbox"], #profile-edit-form input[type="checkbox"],  #profile-edit-form input[type="radio"], #message-threads input, #settings-form input[type="radio"], #create-group-form input[type="radio"], #create-group-form input[type="checkbox"], #invite-list input[type="checkbox"], #group-settings-form input[type="radio"], #group-settings-form input[type="checkbox"], #new-post input[type="checkbox"], .bbp-form input[type="checkbox"], .bbp-form .input[type="radio"], .register-section .input[type="radio"], .register-section input[type="checkbox"], .message-check, #select-all-messages, #siteLoginBox input[type="checkbox"], #siteRegisterBox input[type="checkbox"]').each(function(){var t=e(this);t.addClass("styled"),0==t.next("label").length&&0==t.next("strong").length&&t.after("<strong></strong>")})}t.BuddyBoss=t.BuddyBoss||{},t.BuddyBoss.is_mobile=null;var g,v,y,_=e(document),w=e(t),j=(e("body"),!1),k=!1,x=!1,C=!1,Q=(e("#main-wrap"),e("#inner-wrap")),$=e("#buddypress"),q=$.find("#item-nav"),T={},B=e("body").data("inputs"),O=navigator.userAgent.indexOf("Android")>=0,M=parseInt((/WebKit\/([0-9]+)/.exec(navigator.appVersion)||0)[1],10)||void 0;O&&M<=534&&0==navigator.vendor.indexOf("Google");r(),w.bind("load",function(){r(),d()});var S;w.resize(function(){clearTimeout(S),S=setTimeout(r,150)});var H=e("#main-wrap img, .svg-graphic").filter(function(e){return!c(this)});H.each(function(){e(this).addClass("not-loaded")});var D=H.waypoint({handler:function(t){this.element!=n?e(this.element).addClass("loaded"):e(this).addClass("loaded")},offset:"85%"});if(e(t).trigger("scroll"),e(document).ajaxSuccess(function(){setTimeout(function(){Waypoint.refreshAll(),D=e("#main-wrap img.not-loaded, .svg-graphic").waypoint({handler:function(t){this.element!==n&&e(this.element).addClass("loaded")},offset:"85%"})},200)}),"undefined"!=typeof Selects&&e.isFunction(Selects.init_select)&&Selects.init_select(j,B),e("body").hasClass("messages")&&_.ajaxComplete(function(){setTimeout(function(){e.isFunction(Selects.init_select)&&Selects.init_select(j,B),"undefined"!=typeof Selects&&e.isFunction(Selects.populate_select_label)&&Selects.populate_select_label(j)},500)}),e(t).on("load",function(){e("body").addClass("boss-page-loaded")}),e("#mobile-right-panel .menu-item-has-children").each(function(){e(this).prepend('<i class="fa submenu-btn fa-angle-down"></i>')}),e("#mobile-right-panel .submenu-btn").on("click",function(t){t.preventDefault(),e(this).toggleClass("fa-angle-left fa-angle-down").parent().find(".sub-menu").slideToggle()}),j&&w.width()<720&&0!=e("#wp-admin-bar-bp-notifications").length&&e("li#wp-admin-bar-bp-notifications a.ab-item > span#ab-pending-notifications").clone().appendTo("#user-nav"),e("#full-screen").on("submit",function(t){var n=new MediumEditor(".sap-editable-area"),i=new MediumEditor(".sap-editable-title"),a=e(".sap-editable-area").attr("id"),o=n.serialize(),s=i.serialize(),r=e(".sap-editable-title").attr("id");e(this).find('input[name="content"]').val(o[a].value.replace(/(\r\n|\n|\r)/gm,"")),e(this).find('input[name="title"]').val(s[r].value.replace(/(\r\n|\n|\r)/gm,""))}),e("#buddyboss-media-add-photo").length||e("#whats-new-textarea .boss-insert-buttons-addons li:first-child").remove(),e("#attachment").change(function(){String.prototype.filename=function(e){var t=this.replace(/\\/g,"/");return t=t.substring(t.lastIndexOf("/")+1)};var t=e(this).val().filename();e("#comments").find(".attached-image").remove(),e("#comment").after('<p class="attached-image"><i class="fa fa-picture-o" aria-hidden="true"></i>'+t+"</p>")}),e("body").on("mouseup",".mfp-close",function(){e(".RegisterBox").removeClass("go"),e(".LoginBox").removeClass("go")}),j||(e("body:not(.settings) #item-nav").find("#nav-bar-filter").jRMenuMore(60),e("#site-navigation .nav-menu").jRMenuMore(120)),e("a.show-options").click(function(t){t.preventDefault(),e(this).next().slideToggle()}),e("#buddypress div.dir-search form, #buddypress div.message-search form, div.bbp-search-form form, form#bbp-search-form").append('<a href="#" id="clear-input"> </a>'),e("a#clear-input").click(function(){jQuery("#buddypress div.dir-search form input[type=text], #buddypress div.message-search form input[type=text], div.bbp-search-form form input[type=text], form#bbp-search-form input[type=text]").val("")}),u(),e("#buddypress #item-header #item-buttons .generic-button").length||e("#buddypress #item-header #item-buttons").hide(),h(),e(document).ajaxComplete(function(){setTimeout(function(){h()},500),setTimeout(function(){h()},1500)}),jq("#message-type-select").change(function(){var e=jq("#message-type-select").val(),t=jq("ul input[type='checkbox']");switch(t.each(function(e){t[e].checked=""}),e){case"unread":var t=jq("ul.unread input[type='checkbox']");break;case"read":var t=jq("ul.read input[type='checkbox']")}""!=e?t.each(function(e){t[e].checked="checked"}):t.each(function(e){t[e].checked=""})}),jq("#delete_inbox_messages, #delete_sentbox_messages").on("click",function(){return checkboxes_tosend="",checkboxes=jq("#message-threads ul input[type='checkbox']"),jq("#message").remove(),jq(this).addClass("loading"),jq(checkboxes).each(function(e){jq(this).is(":checked")&&(checkboxes_tosend+=jq(this).attr("value")+",")}),""==checkboxes_tosend?(jq(this).removeClass("loading"),!1):(jq.post(ajaxurl,{action:"messages_delete",thread_ids:checkboxes_tosend},function(e){e[0]+e[1]=="-1"?jq("#message-threads").prepend(e.substr(2,e.length)):(jq("#message-threads").before('<div id="message" class="updated"><p>'+e+"</p></div>"),jq(checkboxes).each(function(e){jq(this).is(":checked")&&jq(this).parent().parent().fadeOut(150)})),jq("#message").hide().slideDown(150),jq("#delete_inbox_messages, #delete_sentbox_messages").removeClass("loading")}),!1)}),"undefined"!=typeof e.fn.fitVids&&e.isFunction(e.fn.fitVids)){e(".wp-video").find("object").addClass("fitvidsignore"),e("#content").fitVids();var R=function(){e(".wp-video").find("object").addClass("fitvidsignore"),e("#content").fitVids()};e(document).ajaxSuccess(R)}if("on"==e("#masthead").data("infinite")){jq(document).on("scroll",function(){var e=jq(".load-more:visible");if(e.get(0)){var n=e.offset();jq(t).scrollTop()+jq(t).height()>n.top&&load_more_activity()}})}j?(e("#switch_mode").val("desktop"),e("#switch_submit").val(translation.view_desktop)):(e("#switch_mode").val("mobile"),e("#switch_submit").val(translation.view_mobile)),e("#switch_submit").click(function(){e.cookie("switch_mode",e("#switch_mode").val(),{path:"/"})});var z=e("#header-search").find("form");e("#search-open").click(function(e){e.preventDefault(),z.fadeIn(),setTimeout(function(){z.find("#s").focus()},301)}),e("#search-close").click(function(e){e.preventDefault(),z.fadeOut()}),e(document).click(function(t){var n=e("#header-search");n.is(t.target)||0!==n.has(t.target).length||z.fadeOut()}),f(),w.resize(function(){f()}),jQuery(document).on("click",".bb-add-label-button",function(e){e.preventDefault(),_this=jQuery(this),_this.find(".fa-spin").fadeOut();var n=jQuery(".bb-label-name").val(),i={action:"bbm_label_ajax",task:"add_new_label",thread_id:0,label_name:n};jQuery.post(ajaxurl,i,function(e){_this.find(".fa-spin").fadeIn();var e=jQuery.parseJSON(e);return""!=e.label_id&&jQuery(".bb-label-container").load(t.location.href+" .bb-label-container",function(){jQuery(".bb-label-container > .bb-label-container").attr("class","")}),"undefined"!=typeof e.message&&void(""!=e.message&&alert(e.message))})}),jQuery(document).on("keydown",".bb-label-name",function(e){13==e.keyCode&&jQuery(".bb-add-label-button").click()}),j||e("#trigger-sidebar").click(function(t){t.preventDefault(),e("body").toggleClass("bb-sidebar-on")}),e(".to-top").bind("click",function(t){t.preventDefault();e(this);e("html, body").stop().animate({scrollTop:"0px"},500)});var E=0;e("#wpadminbar").is(":visible")&&(E=32),e(".sticky-header #masthead").sticky({topSpacing:E}),e('#buddypress table.notification-settings .yes input[type="radio"]').after("<label>"+translation.yes+"</label>"),e('#buddypress table.notification-settings .no input[type="radio"]').after("<label>"+translation.no+"</label>");var X=function(){var t=e("#posts-carousel ul"),n=t.triggerHandler("currentVisible");t.children().removeClass("loaded"),n.filter(":eq(1)").addClass("loaded")};e("#posts-carousel").length>0&&p(),b(),m(),e(document).ajaxSuccess(function(){m()}),e("#buddypress table.notifications input").after("<strong></strong>"),e(".header-notifications .pending-count").html("<b>"+jQuery(".header-notifications .pending-count").html()+"</b>"),e(".tablet .header-account-login").on("click touch",function(t){e(this).find(".pop").toggleClass("hover")}),e(".tablet .header-account-login > a").on("click touch",function(e){e.preventDefault()}),e(document).on("change","#calc_shipping_country",function(){var t=e("#calc_shipping_state_field");t.find("input").length>0?t.addClass("plain-input"):t.removeClass("plain-input")}),e(document).on("heartbeat-tick.bb_notification_count",function(t,n){b(),n.hasOwnProperty("bb_notification_count")&&(n=n.bb_notification_count,n.notification>0?(jQuery("#ab-pending-notifications").html("<b>"+n.notification+"</b>").removeClass("no-alert"),jQuery("#ab-pending-notifications-mobile").html("<b>"+n.notification+"</b>").removeClass("no-alert"),jQuery(".ab-item[href*='/notifications/']").each(function(){jQuery(this).append("<span class='count'><b>"+n.notification+"</b></span>"),jQuery(this).find(".count").length>1&&jQuery(this).find(".count").first().remove()})):(jQuery("#ab-pending-notifications").html("<b>"+n.notification+"</b>").addClass("no-alert"),jQuery("#ab-pending-notifications-mobile").html("<b>"+n.notification+"</b>").addClass("no-alert"),jQuery(".ab-item[href*='/notifications/']").each(function(){jQuery(this).find(".count").remove()})),jQuery(".mobile #wp-admin-bar-my-account-notifications-read, #adminbar-links #wp-admin-bar-my-account-notifications-read").each(function(){e(this).find("a").find(".count").remove()}),n.unread_message>0?(jQuery("#user-messages").find("span").html("<b>"+n.unread_message+"</b>").removeClass("no-alert"),jQuery(".ab-item[href*='/messages/']").each(function(){jQuery(this).append("<span class='count'><b>"+n.unread_message+"</b></span>"),jQuery(this).find(".count").length>1&&jQuery(this).find(".count").first().remove()})):(jQuery("#user-messages").find("span").html("<b>"+n.unread_message+"</b>").addClass("no-alert"),jQuery(".ab-item[href*='/messages/']").each(function(){jQuery(this).find(".count").remove()})),jQuery(".mobile #wp-admin-bar-my-account-messages-default, #adminbar-links #wp-admin-bar-my-account-messages-default").find("li:not('#wp-admin-bar-my-account-messages-inbox')").each(function(){jQuery(this).find("span").remove()}),n.friend_request>0?jQuery(".ab-item[href*='/friends/']").each(function(){jQuery(this).append("<span class='count'><b>"+n.friend_request+"</b></span>"),jQuery(this).find(".count").length>1&&jQuery(this).find(".count").first().remove()}):jQuery(".ab-item[href*='/friends/']").each(function(){jQuery(this).find(".count").remove()}),jQuery(".mobile #wp-admin-bar-my-account-friends-default, #adminbar-links #wp-admin-bar-my-account-friends-default").find("li:not('#wp-admin-bar-my-account-friends-requests')").each(function(){jQuery(this).find("span").remove()}),jQuery("#all-notificatios .pop ul").html(n.notification_content))})},buddyboss_cover_photo=function(t){$bb_cover_photo=e("#page .bb-cover-photo:last"),object=$bb_cover_photo.data("obj"),object_id=$bb_cover_photo.data("objid"),nonce=$bb_cover_photo.data("nonce"),$refresh_button=e("#refresh-cover-photo-btn"),rebind_refresh_cover_events=function(){$refresh_button.click(function(){e(".bb-cover-photo #growls").remove(),e("#update-cover-photo-btn").prop("disabled",!0).removeClass("uploaded").addClass("disabled").find("i").fadeIn(),$refresh_button.prop("disabled",!0).removeClass("uploaded").addClass("disabled").find("i").fadeIn(),e.ajax({type:"POST",url:ajaxurl,data:{action:"buddyboss_cover_photo_refresh",object:object,object_id:object_id,nonce:t.nonce,routine:$refresh_button.data("routine")},success:function(t){var n=e.parseJSON(t);e("#update-cover-photo-btn").prop("disabled",!1).removeClass("disabled").addClass("uploaded").find("i.fa-spin").fadeOut(),$refresh_button.prop("disabled",!1).removeClass("disabled").addClass("uploaded").find("i.fa-spin").fadeOut(),n||e.growl.error({title:"",message:BuddyBossOptions.bb_cover_photo_failed_refresh}),n.error?e.growl.error({title:"",message:n.error}):($bb_cover_photo.find(".holder").remove(),image=n.image,$bb_cover_photo.append('<div class="holder"></div>'),$bb_cover_photo.find(".holder").css("background-image","url("+image+")"),"refresh"==$refresh_button.data("routine")?($refresh_button.parent().toggleClass("no-photo"),$refresh_button.find(".fa-refresh").removeClass("fa-refresh").addClass("fa-times"),$refresh_button.find(">div").html(BuddyBossOptions.bb_cover_photo_remove_title+'<i class="fa fa-spinner fa-spin" style="display: none;"></i>'),$refresh_button.attr("title",BuddyBossOptions.bb_cover_photo_remove_title),$refresh_button.data("routine","remove")):($refresh_button.parent().toggleClass("no-photo"),$refresh_button.find(".fa-times").removeClass("fa-times").addClass("fa-refresh"),$refresh_button.find(">div").html(BuddyBossOptions.bb_cover_photo_refresh_title+'<i class="fa fa-spinner fa-spin" style="display: none;"></i>'),$refresh_button.attr("title",BuddyBossOptions.bb_cover_photo_refresh_title),$refresh_button.data("routine","refresh")),e.growl.notice({title:"",message:n.success}))},error:function(){$bb_cover_photo.find(".progress").hide().find("span").css("width","0%"),e.growl.error({message:"Error"})}})})},$refresh_button.length>0&&rebind_refresh_cover_events()},s.init=function(){s.injected=!1,i.$document.ready(s.domReady)},s.domReady=function(){s.check()},s.check=function(){!s.injected&&i.body.hasClass("buddypress")&&0==i.$buddypress.length&&s.inject()},s.inject=function(){s.injected=!0;var t,n,a=e("#secondary"),o=!1,r=e("#content"),d=r.find(".padder").first(),o=!1,c=r.children("article").first();a.length&&(a.prop("id","secondary").addClass("bp-legacy"),o=!0),d.length?(d.prop("id","buddypress").addClass("bp-legacy entry-content"),o=!0):r.length&&(o=!0),o&&(i.$buddypress=e("#buddypress"),t=e(".buddyboss-bp-legacy.page-title"),n=e(".buddyboss-bp-legacy.item-header"),0===c.length&&(r.wrapInner("<article/>"),c=e(r.find("article").first())),0!==r.find(".entry-header").length&&0!==r.find(".entry-title").length||(t.prependTo(c).show(),t.children().unwrap()),0===r.find("#item-header-avatar").length&&i.$buddypress.find("#item-header").length&&(n.prependTo(i.$buddypress.find("#item-header")).show(),n.children().unwrap()))},jQuery(document).ready(function(){a.init()})}(jQuery,window);(function(e){e.fn.jRMenuMore=function(t){e(this).each(function(){function n(n){var i=0,a=e(n).width()-t,o=-1,s="";jQuery.each(e(n).children(),function(){o++,i+=e(this).outerWidth(!0),a<i&&(s+=e("<div>").append(e(this).clone()).html(),e(this).remove())}),e(n).append('<li class="hideshow"><a class="bb-menu-button" href="#"><i class="fa"></i></a><ul>'+s+"</ul></li>"),e(n).children("li.hideshow ul").css("top",e(n).children("li.hideshow").outerHeight(!0)+"px"),e(n).find("li.hideshow > a").click(function(t){t.preventDefault(),e(this).parent("li.hideshow").children("ul").toggle(),e(this).parent("li.hideshow").parent("ul").toggleClass("open")}),e(document).mouseup(function(t){var n=e("li.hideshow");n.is(t.target)||0!==n.has(t.target).length||(n.children("ul").hide(),n.parent("ul").removeClass("open"))}),e(n).find("li.hideshow").find("li").length>0?e(n).find("li.hideshow").show():e(n).find("li.hideshow").hide()}e(this).addClass("horizontal-responsive-menu"),n(this);var i=this;e("#main-wrap").resize(function(){e(i).append(e(e(e(i).children("li.hideshow")).children("ul")).html()),e(i).children("li.hideshow").remove(),n(i)})})}})(jQuery),function(e){var t=e([]),n=800,i=30,a=10,o=[],s={},r=function(e){var t,n;for(t=0,n=o.length;t<n;t++)Math.abs(e.pageX-o[t].x)<i&&Math.abs(e.pageY-o[t].y)<i&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault())},d=!0;Modernizr&&Modernizr.hasOwnProperty("touch")&&(d=Modernizr.touch);var c=function(){o.splice(0,1)};e.event.special.fastclick={touchstart:function(t){s.startX=t.originalEvent.touches[0].pageX,s.startY=t.originalEvent.touches[0].pageY,s.hasMoved=!1,e(this).on("touchmove",e.event.special.fastclick.touchmove)},touchmove:function(t){(Math.abs(t.originalEvent.touches[0].pageX-s.startX)>a||Math.abs(t.originalEvent.touches[0].pageX-s.startY)>a)&&(s.hasMoved=!0,e(this).off("touchmove",e.event.special.fastclick.touchmove))},add:function(t){if(d){var i=e(this);i.data("objHandlers")[t.guid]=t;var a=t.handler;t.handler=function(t){if(i.off("touchmove",e.event.special.fastclick.touchmove),!s.hasMoved){o.push({x:s.startX,y:s.startY}),window.setTimeout(c,n);var r=(e([]),arguments);e.each(i.data("objHandlers"),function(){this.selector?e(this.selector,i).each(function(){(this==t.target||e(this).has(t.target).length>0)&&a.apply(this,r)}):(i[0]==t.target||i.has(t.target).length>0)&&a.apply(i,r)})}}}},setup:function(n,i,a){var o=e(this);return d?(t=t.add(o),o.data("objHandlers")||(o.data("objHandlers",{}),o.on("touchstart",e.event.special.fastclick.touchstart),o.on("touchend touchcancel",e.event.special.fastclick.handler)),void(s.ghostbuster||(e(document).on("click vclick",r),s.ghostbuster=!0))):void o.on("click",e.event.special.fastclick.handler)},teardown:function(n){var i=e(this);return d?(t=t.not(i),i.off("touchstart",e.event.special.fastclick.touchstart),i.off("touchmove",e.event.special.fastclick.touchmove),i.off("touchend touchcancel",e.event.special.fastclick.handler),void(0==t.length&&(e(document).off("click vclick",r),s.ghostbuster=!1))):void i.off("click",e.event.special.fastclick.handler)},remove:function(t){if(d){var n=e(this);delete n.data("objHandlers")[t.guid]}},handler:function(t){var n=t.type;t.type="fastclick",e.event.trigger.call(this,t,{},this,!0),t.type=n}}}(jQuery);